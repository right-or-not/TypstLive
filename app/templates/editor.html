<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TypstLive - Editor</title>
</head>
<body>
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h1>Typst 公式编译器</h1>
        <div>
            <span>欢迎，{{ current_user.username }}！</span>
            <form action="{{ url_for('auth.logout') }}" method="POST" style="display: inline;">
                <button type="submit" style="margin-left: 10px;">退出登录</button>
            </form>
        </div>
    </div>
    
    <hr>
    
    <!-- 编辑器区域 -->
    <div>
        <h2>编辑器</h2>
        <div style="display: flex; gap: 20px;">
            <!-- Typst 代码编辑器 -->
            <div style="flex: 1;">
                <h3>Typst 代码</h3>
                <textarea id="typst-code" style="width: 100%; height: 300px; font-family: monospace;"
                          placeholder="输入 Typst 公式代码，例如：$x^2 + y^2 = z^2$">
$ sum_(k=1)^n k = (n(n+1)) / 2 $
                </textarea>
                <div>
                    <button id="compile-btn">编译公式</button>
                    <button id="clear-btn">清空</button>
                </div>
            </div>
            
            <!-- 预览区域 -->
            <div style="flex: 1;">
                <h3>公式预览</h3>
                <div id="preview-area" style="border: 1px solid #ccc; min-height: 300px; padding: 10px;">
                    <p>公式预览将显示在这里...</p>
                </div>
                <div id="error-area" style="color: red; margin-top: 10px;"></div>
            </div>
        </div>
    </div>
    
    <hr>
    
    <!-- 历史记录链接 -->
    <div>
        <a href="{{ url_for('main.history') }}">查看编译历史</a> | 
        <a href="{{ url_for('main.profile') }}">编辑个人信息</a>
    </div>
    
    <script>
        // 基本的 JavaScript 功能
        document.getElementById('clear-btn').addEventListener('click', function() {
            document.getElementById('typst-code').value = '';
        });
        
        // 编译功能将在后续实现
        document.getElementById('compile-btn').addEventListener('click', function() {
            const code = document.getElementById('typst-code').value;
            alert('编译功能将在后续实现！代码内容：\n' + code.substring(0, 100));
        });
    </script>
</body>
</html>